# Gas Town Operator - Enterprise Edition (FIPS)
# ==============================================================================
# For OpenShift and regulated environments (FedRAMP, HIPAA, government).
# Uses UBI9 base image with FIPS-validated BoringCrypto.
#
# Usage:
#   helm install gastown-operator oci://ghcr.io/boshu2/charts/gastown-operator \
#     -f values-fips.yaml -n gastown-system --create-namespace
# ==============================================================================

replicaCount: 1

image:
  repository: ghcr.io/boshu2/gastown-operator
  pullPolicy: IfNotPresent
  tag: "0.3.2-fips"  # FIPS build with UBI9 + BoringCrypto

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# Gas Town configuration
gtConfig:
  townRoot: /gt
  gtBinary: /usr/local/bin/gt

# Volume configuration
volumes:
  enabled: true
  hostPath: /home/core/gt

serviceAccount:
  create: true
  annotations: {}
  name: ""

rbac:
  create: true

podAnnotations: {}
podLabels: {}

podSecurityContext:
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

# OpenShift restricted SCC compliant
# NOTE: runAsUser must be null to let OpenShift assign from the namespace range
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: null

resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}

# Metrics configuration
metrics:
  enabled: true
  port: 8443
  secure: true

# Health probes
probes:
  healthPort: 8081

# Leader election (for HA)
leaderElection:
  enabled: true
