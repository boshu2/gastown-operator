# ==============================================================================
# gastown-operator values for Community Edition (Vanilla Kubernetes)
# ==============================================================================
# Usage:
#   helm install gastown-operator ./helm/gastown-operator \
#     -n gastown-system --create-namespace \
#     -f helm/gastown-operator/values-community.yaml
# ==============================================================================

image:
  # Community edition uses distroless base
  repository: ghcr.io/boshu2/gastown-operator
  tag: "v0.1.1"
  pullPolicy: IfNotPresent

# Polecat pod default images (community editions)
polecatImages:
  git: "alpine/git:2.43.0"
  claude: "node:20-slim"

# Pod Security Standards compliant (baseline/restricted)
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65532
  runAsGroup: 65532
  fsGroup: 65532
  seccompProfile:
    type: RuntimeDefault

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 65532
  runAsGroup: 65532
  capabilities:
    drop:
      - ALL
  seccompProfile:
    type: RuntimeDefault

# Resource defaults for community
resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Disable hostPath for cloud-native deployment
# Operator communicates with Gas Town via API/webhook instead
volumes:
  enabled: false

# Service account
serviceAccount:
  create: true
  annotations: {}

rbac:
  create: true

# Metrics (Prometheus compatible)
metrics:
  enabled: true
  port: 8443
  secure: true

# Health probes
probes:
  healthPort: 8081

# Leader election for HA
leaderElection:
  enabled: true

# No node affinity by default - runs anywhere
nodeSelector: {}
tolerations: []
affinity: {}
