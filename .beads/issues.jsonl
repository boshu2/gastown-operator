{"id":"go-0eq","title":"Refactor webhook validation tests to table-driven","description":"Some tests use Ginkgo when table-driven would be simpler. Per Go style guide","status":"open","priority":3,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-20T08:21:49.016994-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T08:21:49.016994-05:00","labels":["testing","vibe"]}
{"id":"go-5wb","title":"Verify circuit breaker integration in controllers","description":"Circuit breaker exists in pkg/gt/circuit_breaker.go but unclear if wired into reconcilers. Verify or integrate","status":"open","priority":2,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-20T08:21:37.859706-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T08:21:37.859706-05:00","labels":["reliability","vibe"]}
{"id":"go-6cv","title":"Expand package comment in pkg/gt/types.go","description":"Minimal package comment. Document design decision (shell out vs direct impl)","status":"open","priority":3,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-20T08:21:53.039211-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T08:21:53.039211-05:00","labels":["docs","vibe"]}
{"id":"go-6jx","title":"Extract duplicate setCondition to shared helper","description":"setCondition is duplicated across rig_controller.go, convoy_controller.go, polecat_controller.go. Extract to pkg/conditions/ or use meta.SetStatusCondition()","status":"open","priority":2,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-20T08:21:25.646261-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T08:21:25.646261-05:00","labels":["refactor","vibe"]}
{"id":"go-7xx","title":"E2E validation: Create Polecat in ocppoc and verify pod execution","description":"Validate the full kubernetes execution flow in ocppoc cluster.\n\n## Prerequisites\n- gastown-operator deployed to ocppoc (go-bwh: done)\n- CRDs with KubernetesSpec applied (go-9m4: done)\n- Secrets configured (git-creds, claude-creds)\n\n## Test Steps\n\n1. **Verify operator is running**\n   ```bash\n   oc get pods -n gastown-system\n   oc logs -n gastown-system deployment/gastown-operator\n   ```\n\n2. **Create test secrets** (if not present)\n   ```bash\n   oc apply -f config/samples/secrets/\n   ```\n\n3. **Create Polecat with kubernetes mode**\n   ```yaml\n   apiVersion: gastown.io/v1alpha1\n   kind: Polecat\n   metadata:\n     name: test-furiosa\n     namespace: gastown-workers\n   spec:\n     rig: gastown_operator\n     executionMode: kubernetes\n     beadID: go-test\n     kubernetes:\n       gitRepository: \"git@gitlab.example.com:olympus/gastown-operator.git\"\n       gitBranch: main\n       gitSecretRef:\n         name: git-ssh-key\n       claudeCredsSecretRef:\n         name: claude-api-key\n   ```\n\n4. **Verify pod creation**\n   ```bash\n   oc get pods -n gastown-workers\n   oc describe pod polecat-test-furiosa -n gastown-workers\n   ```\n\n5. **Verify init container (git clone)**\n   ```bash\n   oc logs polecat-test-furiosa -c git-init -n gastown-workers\n   ```\n\n6. **Verify Claude container starts**\n   ```bash\n   oc logs -f polecat-test-furiosa -c claude -n gastown-workers\n   ```\n\n7. **Verify Polecat status reflects pod**\n   ```bash\n   oc get polecat test-furiosa -o yaml\n   ```\n\n8. **Cleanup**\n   ```bash\n   oc delete polecat test-furiosa\n   ```\n\n## Acceptance Criteria\n- [ ] Operator pod running in gastown-system\n- [ ] Polecat CR accepted\n- [ ] Pod created in gastown-workers namespace\n- [ ] Init container completes (git clone succeeds)\n- [ ] Claude container starts\n- [ ] Polecat status shows Running/Working\n- [ ] Cleanup removes pod\n\n## Blockers\n- Need valid git SSH key secret for ocppoc\n- Need valid Claude API key secret for ocppoc","status":"closed","priority":1,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-18T12:40:36.796478-05:00","created_by":"olympus/crew/goku","updated_at":"2026-01-19T19:01:40.529178-05:00","closed_at":"2026-01-19T19:01:40.529178-05:00","close_reason":"E2E validated: OAuth auth from keychain works, full polecat lifecycle tested successfully","labels":["ocppoc","testing"],"comments":[{"id":1,"issue_id":"go-7xx","author":"olympus/crew/goku","text":"Updated approach: Use laptop replica pattern - mount ~/.claude/ into pods so Claude thinks it's running on laptop. Shares active session. See child bead go-7xx.1 for pod builder changes.","created_at":"2026-01-18T17:49:37Z"},{"id":3,"issue_id":"go-7xx","author":"Boden Fuller","text":"E2E test completed 2026-01-19. Full flow validated: operator → polecat CR → pod → git-init → claude container. Claude started successfully but hit expired OAuth token in claude-home secret. Status tracking works correctly (shows Stuck when Claude fails). All code paths verified working. Only blocker: need to refresh credentials in claude-home secret.","created_at":"2026-01-19T23:13:37Z"}]}
{"id":"go-7xx.1","title":"Update pod builder: mount claude creds at $HOME/.claude/","description":"Change the pod builder to mount Claude credentials at the standard Linux location.\n\n## Current Behavior\n- `ClaudeCredsMountPath = \"/claude-creds\"`\n- Sets `CLAUDE_CONFIG_DIR=/claude-creds`\n\n## Desired Behavior\n- Mount at `$HOME/.claude/` (which is `/home/nonroot/.claude/`)\n- Claude Code finds `.credentials.json` in its default location\n- No need for CLAUDE_CONFIG_DIR override\n\n## Changes Required\n\n### pkg/pod/builder.go\n\n```go\n// Change mount path constant\nClaudeCredsMountPath = \"/home/nonroot/.claude\"\n\n// In buildClaudeContainer(), remove CLAUDE_CONFIG_DIR env var\n// (Claude will use default $HOME/.claude/)\n```\n\n### Secret Format\n\nThe secret should contain files as Claude expects:\n- `.credentials.json` - OAuth tokens from laptop keychain\n- Optionally: `settings.json` - Claude settings\n\n### Test\n\n1. Build operator locally: `make build`\n2. Run with test polecat\n3. Verify Claude finds credentials without CLAUDE_CONFIG_DIR\n\n## Acceptance Criteria\n- [ ] Mount path changed to /home/nonroot/.claude\n- [ ] CLAUDE_CONFIG_DIR env var removed (or set to mount path)\n- [ ] Unit tests updated\n- [ ] Claude authenticates using mounted .credentials.json","status":"closed","priority":1,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-18T12:49:48.985422-05:00","created_by":"olympus/crew/goku","updated_at":"2026-01-18T12:49:48.985422-05:00","closed_at":"2026-01-18T18:50:49Z","labels":["enhancement"],"dependencies":[{"issue_id":"go-7xx.1","depends_on_id":"go-7xx","type":"parent-child","created_at":"2026-01-18T12:49:48.98741-05:00","created_by":"olympus/crew/goku"}],"comments":[{"id":2,"issue_id":"go-7xx.1","author":"olympus/crew/goku","text":"COMPLETED: Mount path changed to /home/nonroot/.claude, CLAUDE_CONFIG_DIR env var removed. Commit 67ed208. Tests pass.","created_at":"2026-01-18T17:58:01Z"}]}
{"id":"go-auc","title":"Add context timeouts in controller reconcilers","description":"Reconcile methods use context directly without timeouts. A hung gt CLI call could block indefinitely. Add context.WithTimeout(ctx, 60*time.Second)","status":"open","priority":2,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-20T08:21:26.960503-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T08:21:26.960503-05:00","labels":["reliability","vibe"]}
{"id":"go-cso","title":"Strengthen path traversal validation in webhooks","description":"validateLocalPath checks for .. but should use filepath.Clean() and verify cleaned path doesn't escape","status":"open","priority":2,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-20T08:21:36.737253-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T08:21:36.737253-05:00","labels":["security","vibe"]}
{"id":"go-cwl","title":"Add /version endpoint to operator webhook server","description":"Add a /version endpoint that returns the operator version, git commit, and build time. This proves the E2E polecat workflow works.","status":"closed","priority":2,"issue_type":"feature","owner":"boden.fuller@gmail.com","created_at":"2026-01-19T21:40:25.626144-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T07:23:24.583691-05:00","closed_at":"2026-01-20T07:23:24.583691-05:00","close_reason":"E2E test complete - PR created at https://github.com/boshu2/gastown-operator/pull/1"}
{"id":"go-t5e","title":"Add godoc comments to all exported functions","description":"Some exported functions lack proper godoc comments starting with function name","status":"open","priority":3,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-20T08:21:50.36083-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T08:21:50.36083-05:00","labels":["docs","vibe"]}
{"id":"go-uj7","title":"Define constants for requeue intervals","description":"Hard-coded durations scattered throughout (time.Minute, 30*time.Second). Define named constants consistently","status":"open","priority":2,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-20T08:21:27.988819-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T08:21:27.988819-05:00","labels":["refactor","vibe"]}
{"id":"go-v89","title":"Document Phase vs State naming convention","description":"Codebase uses both Phase (status) and State (spec/circuit). Document the convention","status":"open","priority":3,"issue_type":"task","owner":"boden.fuller@gmail.com","created_at":"2026-01-20T08:21:51.702094-05:00","created_by":"Boden Fuller","updated_at":"2026-01-20T08:21:51.702094-05:00","labels":["docs","vibe"]}
