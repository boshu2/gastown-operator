# Dependabot Configuration
# https://docs.github.com/en/code-security/dependabot/dependabot-version-updates
#
# Automated dependency updates with sensible grouping and scheduling.

version: 2

updates:
  # Go modules
  - package-ecosystem: gomod
    directory: /
    schedule:
      interval: weekly
      day: monday
      time: "06:00"
      timezone: America/New_York
    open-pull-requests-limit: 5
    commit-message:
      prefix: "deps(go)"
    labels:
      - dependencies
      - go
    groups:
      # Group all k8s-related updates together
      kubernetes:
        patterns:
          - "k8s.io/*"
          - "sigs.k8s.io/*"
        update-types:
          - minor
          - patch
      # Group testing dependencies
      testing:
        patterns:
          - "github.com/onsi/*"
          - "github.com/stretchr/testify"
      # Group observability
      observability:
        patterns:
          - "go.opentelemetry.io/*"
          - "github.com/prometheus/*"

  # GitHub Actions
  - package-ecosystem: github-actions
    directory: /
    schedule:
      interval: weekly
      day: monday
      time: "06:00"
      timezone: America/New_York
    open-pull-requests-limit: 3
    commit-message:
      prefix: "ci(deps)"
    labels:
      - dependencies
      - ci
    groups:
      # Group all action updates
      actions:
        patterns:
          - "*"
        update-types:
          - minor
          - patch

  # Docker base images
  - package-ecosystem: docker
    directory: /
    schedule:
      interval: weekly
      day: monday
      time: "06:00"
      timezone: America/New_York
    open-pull-requests-limit: 2
    commit-message:
      prefix: "build(docker)"
    labels:
      - dependencies
      - docker
